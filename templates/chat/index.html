{% extends 'chat/base.html' %}
{% load static %}
{% load filters %}
{% block content %}


<div>

    <p>{{ user.username }}さんはどこのルームにも入っていません</p>
    <p>左の「ルームを追加する」からルームを追加するか友達からルームの招待を受けてください。</p>


</div>

<div>
    <h5>友達</h5>

    {% if friend_list %}
    {%for friend in friend_list %}
    <div>

        {% if friend.relating_user == user %}
        {{friend.related_user}}
        {%elif friend.related_user == user %}
        {{friend.relating_user}}
        {%endif%}
    </div>
    {% endfor %}
    {% else %}
    <p>いません</p>
    {% endif %}

    <div>
        <h5>ユーザー一覧</h5>

        {% if user_list %}
        {%for user in user_list %}
        <div>
            {{user.username}}
            <form action="add_friend/" method="post" name="add_friend">
                {% csrf_token%}
                <button type='submit' name='action' value="{{user.id}}">友達追加</button>
            </form>
        </div>
        {% endfor %}
        {% else %}
        <p>いません</p>
        {% endif %}

    </div>

</div>
{% endblock %}
<script>
    document.querySelector('#room-name-input').focus();
    document.querySelector('#room-name-input').onkeyup = function (e) {
        if (e.keyCode === 13) {  // enter, return
            document.querySelector('#room-name-submit').click();
        }
    };

    document.querySelector('#room-name-submit').onclick = function (e) {
        var roomName = document.querySelector('#room-name-input').value;
        window.location.pathname = '/chat/room/' + roomName + '/';
    };
</script>